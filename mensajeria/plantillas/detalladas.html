{% extends "dash2.html" %}{%load staticfiles %}
{% load custom_filters %}
{% block title %} Proyecto | Respuestas detalladas{% endblock %}
{% block head2 %}<link rel="stylesheet" href="https://cdn.datatables.net/plug-ins/1.10.7/integration/bootstrap/3/dataTables.bootstrap.css"/>{% endblock %}
{% block contenido2 %}
<div class="row">
<div class="m-l m-r row wrapper border-bottom white-bg page-heading">
	<div class="col-lg-12">
		<h2>Proyecto {{Proyecto.nombre |capfirst | escape}}</h2>
		<ol class="breadcrumb">
			<li class="active">
				<a href="/home/"><i class="fa fa-cubes"></i> Mis proyectos</a>
			</li>
			<li>Respuestas detalladas</li>
		</ol>
	</div>
</div>
<div class="m-t col-lg-12">
	<div class="ibox float-e-margins">
		<div class="ibox-title">
			<h5 class="m-r-xs">Participantes del proyecto:</h5>
			<div class="ibox-tools">
				<a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
			</div>
		</div>
		<div class="ibox-content">
			{%if Permisos.det_see and Permisos.res_see and Proyecto.interna%}<table id="pro" class="table table-striped table-bordered" cellspacing="0" width="99%">
				<thead>
					<tr>
						<th>Participante</th>
						<th>Email</th>
						<th>Variable</th>
						<th>Pregunta</th>
						<th>Respuesta</th>
					</tr>
				</thead>
				<tbody>
					{%for i in Participantes%}
					<tr>
						<td>{{i.colaborador.nombre | capfirst | escape}} {{i.colaborador.apellido | capfirst | escape}}</td>
						<td>{{i.colaborador.email | capfirst | escape}}</td>
						<td>{{i.pregunta.variable.nombre  | escape}}</td>
						<td>{{i.pregunta.texto  | escape}}</td>
						{%if i.pregunta.abierta%}<td>{%if i.respuesta %}{{i.respuesta | escape}}{%else%}No hay respuesta aún{%endif%}</td>{%endif%}
						{%if i.pregunta.multiple%}<td>{%ifequal i.respuesta "0"%}0{%else%}{%if i.fecharespuesta%}{%if i.respuesta %}{{i.respuesta| jsonbr |safe}}{%else%}Ninguna seleccionada{%endif%}{%else%}No hay respuesta aún{%endif%}</td>{%endifequal%}{%endif%}
						{%if i.pregunta.abierta or i.pregunta.multiple%}{%else%}<td>{%ifequal i.respuesta "0"%}0{%else%}{%if i.respuesta %}{{i.respuesta | escape}}{%else%}No hay respuesta aún{%endif%}</td>{%endifequal%}{%endif%}
					</tr>{% endfor %}
				</tbody>
			</table>{%endif%}
			{%if Permisos.det_see and Permisos.res_see and not Proyecto.interna%}<table id="pro" class="table table-striped table-bordered" cellspacing="0" width="99%">
				<thead>
					<tr>
						<th>Participante</th>
						<th>Fecha</th>
						<th>Variable</th>
						<th>Pregunta</th>
						<th>Respuesta</th>
					</tr>
				</thead>
				<tbody>
					{%for i in Participantes%}
					<tr>
						<td>Participante_{{i.colaborador | escape}}</td>
						<td>{{i.fecharespuesta | date:'Y-m-d D H:i'}}</td>
						<td>{{i.pregunta.variable.nombre  | escape}}</td>
						<td>{{i.pregunta.texto  | escape}}</td>
						{%if i.pregunta.abierta%}<td>{%if i.respuesta %}{{i.respuesta | escape}}{%else%}No hay respuesta aún{%endif%}</td>{%endif%}
						{%if i.pregunta.multiple%}<td>{%ifequal i.respuesta "0"%}0{%else%}{%if i.fecharespuesta%}{%if i.respuesta %}{{i.respuesta| jsonbr |safe}}{%else%}Ninguna seleccionada{%endif%}{%else%}No hay respuesta aún{%endif%}</td>{%endifequal%}{%endif%}
						{%if i.pregunta.abierta or i.pregunta.multiple%}{%else%}<td>{%ifequal i.respuesta "0"%}0{%else%}{%if i.respuesta %}{{i.respuesta | escape}}{%else%}No hay respuesta aún{%endif%}</td>{%endifequal%}{%endif%}
					</tr>{% endfor %}
				</tbody>
			</table>{%endif%}
			{%if Permisos.res_exp%}<div class="container-fluid"><a href={%if Proyecto.interna%}"/respuestas/exportar/interna/"{%else%}"/respuestas/exportar/externa/"{%endif%} class="btn btn-primary pull-right m-t"><i class="fa fa-file-xls"></i> Exportar respuestas</a></div>{%endif%}
		</div>
	</div>
</div>
</div>
{% endblock %}
{% block scripts%}
<script src="https://cdn.datatables.net/1.10.7/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/plug-ins/1.10.7/integration/bootstrap/3/dataTables.bootstrap.min.js"></script>
<script>$("#pro").dataTable({"columns":[{ className: "center" },{ className: "center" },{ className: "center" },{ className: "center" },{ className: "left" }],scrollX:!0,language:{sProcessing:"Procesando...",sLengthMenu:"Mostrar _MENU_ respuestas",sZeroRecords:"No se encontraron resultados",sEmptyTable:"El Proyecto no posee ninguna respuesta aún.",sInfo:"Respuestas del _START_ al _END_ de un total de _TOTAL_",sInfoEmpty:"Respuestas del  0 al 0 de un total de 0",sInfoFiltered:"(filtrado de un total de _MAX_ respuestas)",sInfoPostFix:"",sSearch:"Buscar:",sUrl:"",sInfoThousands:",",sLoadingRecords:"Cargando...",oPaginate:{sFirst:"Primero",sLast:"Último",sNext:"Siguiente",sPrevious:"Anterior"},oAria:{sSortAscending:": Activar para ordenar la columna de manera ascendente",sSortDescending:": Activar para ordenar la columna de manera descendente"}}});</script>
{%endblock%}
